<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TODO</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>

<body>
<div class="container bg-warning shadow mx-auto mt-5 p-5 w-75">
<h2>My ToDo App</h2>
<hr>
<div class="input-group">
<input id="item" class="form-control" type="text" placeholder="할일을 입력하세요..">
<button type="button" class="btn btn-primary" onclick="addItem()">할일 추가</button>
</div>
<hr>
<ul id="todolist" class="list-group"></ul>
<button type="button" class="btn btn-danger mt-3" onclick="deleteCheckedItems()">선택한 항목 삭제</button>
</div>

<script>
function addItem() {
	// 입력값을 읽어와 todo 변수에 저장
    let todo = document.getElementById("item");
	
	// <ul> 요소를 참조하여 list 변수에 저장
    let list = document.getElementById("todolist");
	
	// 새로운 <li> 요소를 생성하여 listitem 변수에 저장
    let listitem = document.createElement("li");
	
	// 새로운 목록에 디자인 추가
    listitem.className = "d-flex list-group-item list-group-item-action list-group-item-warning";
   
    let checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.className = "form-check-input mx-3";
   
    let xbtn = document.createElement("button");
    xbtn.className = "btn-close ms-auto";

    xbtn.onclick = function(e){
        let pnode = e.target.parentNode;
        list.removeChild(pnode);
    }

 	// 입력값을 <li> 태그 보디에 추가
    listitem.innerText = todo.value;
    listitem.appendChild(checkbox);
    listitem.appendChild(xbtn);
    // ul 요소에 li 요소 추가
    list.appendChild(listitem);

    // 입력칸 비우기 및 포커스 이동
    todo.value = "";
    todo.focus();
}

function deleteCheckedItems() {
	
    let list = document.getElementById("todolist");
    let checkboxes = list.getElementsByClassName("form-check-input");
    let itemsToDelete = [];
   
    for (let i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked) {
            let listItem = checkboxes[i].parentNode;
            itemsToDelete.push(listItem);
        }
    }
   
    for (let i = 0; i < itemsToDelete.length; i++) {
        list.removeChild(itemsToDelete[i]);
    }
}

</script>
</body>
</html>
